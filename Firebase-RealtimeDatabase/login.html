<!DOCTYPE html>
<html lang="jp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>chitalk</title>

    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- JQuery -->



</head>
<body>
    <section>
        <!-- <div class="button10" id="loginBtn">
            <a href="">良いこと日記をつける</a>
          </div> -->
        <input type="button" value="ログイン" id="loginBtn" >
    </section>

    <style>
        body {
            background:aquamarine;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            padding: 15px;
            font-size: 14px;
            font-family: sans-serif;
        }

        label {
            display: block;
            margin: 0 0 10px;
        }
        label input {
            margin: 0 5px;
        }

        p {
            text-align: center;

        }

        

                
    </style>
    
    <script type="module">
//##################################################### 
// 必要なfirebaseライブラリを読み込み
//##################################################### 
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js";
    // 貼り付ける場所↓
    import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged} from "https://www.gstatic.com/firebasejs/9.1.0/firebase-auth.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
    // Your web app's Firebase configuration
//##################################################### 
// 取得したKEY
//##################################################### 
        const firebaseConfig = {
        apiKey: "AIzaSyDzTZz0FUL6msWdQ_KXbdkWp78VucCVl60",
        authDomain: "dev245-9dcb8.firebaseapp.com",
        projectId: "dev245-9dcb8",
        storageBucket: "dev245-9dcb8.appspot.com",
        messagingSenderId: "397119300991",
        appId: "1:397119300991:web:5f11a83dc3d7986d6ba64a"
        };

        const app = initializeApp(firebaseConfig);
        // ##################################
        // GoogleAuth(認証用)
        // ##################################
        const provider = new GoogleAuthProvider();
        provider.addScope('https://www.googleapis.com/auth/contacts.readonly');
        const auth = getAuth();
        // ##################################
        // Login処理
        // ##################################
        $("#loginBtn").on("click", function () {
            console.log(auth, 'auth');
            console.log(provider, 'provider');
            //Google認証完了の処理
            signInWithPopup(auth, provider).then((result) => {
                // Login後のページ遷移
                location.href = "simple.html";  //遷移先次のページ ログインが成功したら次のページに飛ぶ
                console.log('ログイン成功');
            }).catch((error) => {
                console.log('ログイン失敗');
                // Handle Errors here.
                const errorCode = error.code;
                const errorMessage = error.message;
                // The email of the user's account used.
                const email = error.email;
                // The AuthCredential type that was used.
                const credential = GoogleAuthProvider.credentialFromError(error);
                // ...
            });
        });
    </script>
</body>
    </script>

</body>

</html>

